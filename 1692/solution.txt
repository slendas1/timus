Представим флаги в виде графа.
Флаги - вершины.
Ребро с весом w между flag1 и flag2 (w - общий цвет между флагами)
Тогда по условию задачи граф полный и веса в нем не повторяются.
Следовательно, для k флагов потребуется k * (k - 1) / 2 цветов.
k * (k - 1) / 2 <= n
k ** 2 - k - 2 * n <= 0
k <= 1 + sqrt(1 + 8 * n)/2

Берем k = floor(1 + sqrt(1 + 8 * n)/2) и последовательно добавляем цвета для каждой пары флагов.